<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Carta Navide√±a üéÑ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        height: 100vh;
        font-family: Georgia, serif;
        background: url("https://images.unsplash.com/photo-1543589077-47d81606c1bf")
          no-repeat center / cover;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
      }

      /* PANTALLA INICIAL */
      .start {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.65);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        z-index: 10;
        padding: 20px;
      }

      .start h1 {
        font-size: 2rem;
        margin-bottom: 25px;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.06);
        }
        100% {
          transform: scale(1);
        }
      }

      .open-btn {
        position: relative;
        overflow: hidden;
        padding: 16px 30px;
        font-size: 1.2rem;
        border-radius: 35px;
        border: none;
        background: linear-gradient(135deg, #e63946, #2a9d8f);
        color: white;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
      }

      .open-btn::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.3);
        transform: skewX(-20deg);
        transition: left 0.6s;
      }

      .open-btn:active::after {
        left: 120%;
      }

      .countdown {
        margin-top: 25px;
        font-size: 3rem;
        display: none;
        animation: zoom 0.8s ease;
      }

      @keyframes zoom {
        from {
          transform: scale(0.4);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* CARTA */
      .card {
        display: none;
        background: rgba(0, 0, 0, 0.6);
        width: 92%;
        max-width: 380px;
        padding: 25px;
        border-radius: 20px;
        text-align: center;
        animation: glow 2s infinite alternate;
      }

      @keyframes glow {
        from {
          box-shadow: 0 0 10px red;
        }
        to {
          box-shadow: 0 0 25px green;
        }
      }

      .intro {
        font-size: 1.9rem;
        font-weight: bold;
        letter-spacing: 1px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
      }

      #text {
        font-size: 1.05rem;
        line-height: 1.8;
        margin-top: 15px;
        white-space: pre-line;
      }

      .versiculo {
        margin-top: 20px;
        font-size: 0.95rem;
        font-style: italic;
        color: #f1faee;
        line-height: 1.6;
        min-height: 60px;
      }

      .versiculo.show {
        opacity: 1;
      }

      .firma {
        opacity: 0;
        margin-top: 20px;
        color: #a8dadc;
        transition: opacity 2s ease;
      }

      .firma.show {
        opacity: 1;
      }

      /* EMOJIS */
      .snow {
        position: absolute;
        top: -10px;
        font-size: 22px;
        animation: fall linear infinite;
      }
      .start {
        transition: opacity 1s ease;
      }
      /* CONFETI */
      .confetti {
        position: absolute;
        width: 8px;
        height: 14px;
        background-color: red;
        top: -10px;
        animation: confetti-fall linear forwards;
      }
      @keyframes confetti-pop {
        0% {
          transform: translateY(0) rotate(0);
          opacity: 1;
        }
        100% {
          transform: translateY(110vh) rotate(720deg);
          opacity: 0;
        }
      }

      @keyframes confetti-fall {
        to {
          transform: translateY(110vh) rotate(720deg);
          opacity: 0;
        }
      }

      @keyframes fall {
        to {
          transform: translateY(110vh);
        }
      }
    </style>
  </head>
  <body>
    <!-- Audios -->
    <audio id="bell">
      <source src="./sinos-de-natal-440257.mp3" />
    </audio>

    <audio id="music" loop>
      <source src="./we-wish-you-a-merry-christmas-444573.mp3" />
    </audio>

    <!-- Pantalla inicial -->
    <div class="start" id="start">
      <h1>üéÑ Tengo algo para ti üéÑ</h1>
      <button
        class="open-btn"
        onclick="iniciarExperiencia()"
        aria-label="Abrir carta navide√±a"
      >
        üéÅ Abrir carta
      </button>
      <div class="countdown" id="countdown"></div>
    </div>

    <!-- Carta -->
    <div class="card" id="card">
      <div class="intro">Merry ChristmasüéÑ</div>
      <div id="text"></div>
      <div class="firma" id="firma">Con cari√±o üíñü´∞</div>
      <div class="versiculo" id="versiculo"></div>
    </div>

    <script>
      const nombreAmiga = "Ferrr";
      const versiculoTexto = `‚ÄúPorque un ni√±o nos ha nacido,
un hijo nos ha sido dado.‚Äù
Isa√≠as 9:6 ‚ú®`;

      const mensaje = `Querida ${nombreAmiga},

Que esta Navidad est√© llena de amor,
paz y momentos hermosos.
Gracias por tu amistad
y por ser una persona tan especial. 
God bless you a lot. üéÑüéÅ‚ú®`;

      let i = 0;
      const text = document.getElementById("text");
      const firma = document.getElementById("firma");
      const versiculo = document.getElementById("versiculo");
      let j = 0;

      function escribir() {
        if (i < mensaje.length) {
          text.innerHTML += mensaje.charAt(i);
          i++;
          setTimeout(escribir, 45);
        } else {
          firma.classList.add("show");

          setTimeout(() => {
            escribirVersiculo();
          }, 1500);
        }
      }
      function escribirVersiculo() {
        if (j < versiculoTexto.length) {
          versiculo.innerHTML += versiculoTexto.charAt(j);
          j++;
          setTimeout(escribirVersiculo, 40);
        }
      }

      function iniciarExperiencia() {
        // Desactivar bot√≥n
        const btn = document.querySelector(".open-btn");
        btn.disabled = true;
        btn.style.opacity = "0.6";

        // Confeti inmediato
        lanzarConfeti();

        // Vibraci√≥n
        if (navigator.vibrate) {
          navigator.vibrate([200, 100, 200]);
        }

        // Campanas
        document.getElementById("bell").play();

        // Contador
        const countdown = document.getElementById("countdown");
        countdown.style.display = "block";

        let count = 3;
        countdown.textContent = count;

        const interval = setInterval(() => {
          count--;
          if (count > 0) {
            countdown.textContent = count;
          } else {
            clearInterval(interval);
            mostrarCarta();
          }
        }, 1000);

        // M√∫sica despu√©s de 5s
        setTimeout(() => {
          document.getElementById("music").play();
        }, 5000);
      }

      function lanzarConfeti() {
        const colores = ["#e63946", "#2a9d8f", "#ffffff", "#f1faee"];
        const btn = document.querySelector(".open-btn");
        const rect = btn.getBoundingClientRect();

        for (let i = 0; i < 40; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";

          // Posici√≥n inicial (centro del bot√≥n)
          confetti.style.left = rect.left + rect.width / 2 + "px";
          confetti.style.top = rect.top + rect.height / 2 + "px";

          // Color
          confetti.style.backgroundColor =
            colores[Math.floor(Math.random() * colores.length)];

          // Dispersi√≥n horizontal aleatoria
          const x = (Math.random() - 0.5) * 300;
          confetti.style.setProperty("--x", `${x}px`);

          // Animaci√≥n
          const duracion = Math.random() * 0.8 + 1.4;
          confetti.style.animation = `confetti-pop ${duracion}s ease-out forwards`;

          document.body.appendChild(confetti);

          setTimeout(() => confetti.remove(), 3000);
        }
      }

      let nieveActiva = false;

      function mostrarCarta() {
        const start = document.getElementById("start");
        start.style.opacity = 0;

        setTimeout(() => {
          start.style.display = "none";
          document.getElementById("card").style.display = "block";
          escribir();

          if (!nieveActiva) {
            setInterval(crearNieve, 350);
            nieveActiva = true;
          }
        }, 1000);
      }

      const emojis = ["üéÑ", "‚ùÑÔ∏è", "üéÅ", "‚≠ê", "‚ù§Ô∏è"];

      function crearNieve() {
        const snow = document.createElement("div");
        snow.className = "snow";
        snow.innerText = emojis[Math.floor(Math.random() * emojis.length)];
        snow.style.left = Math.random() * window.innerWidth + "px";
        snow.style.animationDuration = Math.random() * 3 + 4 + "s";
        document.body.appendChild(snow);
        setTimeout(() => snow.remove(), 7000);
      }
    </script>
  </body>
</html>
